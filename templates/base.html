<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Uploader</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --buffer-primary: #168EEA;
            --buffer-primary-dark: #1266A3;
            --buffer-secondary: #4C68D7;
            --buffer-success: #1CB68B;
            --buffer-warning: #FEB941;
            --buffer-danger: #EB5757;
            --buffer-text-primary: #2D3748;
            --buffer-text-secondary: #4A5568;
            --buffer-text-muted: #718096;
            --buffer-bg-primary: #FFFFFF;
            --buffer-bg-secondary: #F7FAFC;
            --buffer-bg-light: #EDF2F7;
            --buffer-border: #E2E8F0;
            --buffer-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --buffer-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--buffer-bg-secondary);
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--buffer-text-primary);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .header {
            background: var(--buffer-bg-primary);
            padding: 4rem 0;
            text-align: center;
            border-bottom: 1px solid var(--buffer-border);
        }
        
        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--buffer-text-primary);
            margin-bottom: 1rem;
            letter-spacing: -0.025em;
        }
        
        .header p {
            font-size: 1.25rem;
            color: var(--buffer-text-secondary);
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400;
        }
        
        .content-area {
            background: var(--buffer-bg-primary);
            border-radius: 12px;
            padding: 3rem;
            margin: 3rem 0;
            box-shadow: var(--buffer-shadow-lg);
            border: 1px solid var(--buffer-border);
        }
        
        .btn-buffer {
            background: var(--buffer-primary);
            border: none;
            color: white;
            font-weight: 600;
            padding: 1rem 2rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: var(--buffer-shadow);
        }
        
        .btn-buffer:hover {
            background: var(--buffer-primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--buffer-shadow-lg);
            color: white;
            text-decoration: none;
        }
        
        .btn-buffer:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(22, 142, 234, 0.1);
        }
        
        .btn-buffer i {
            margin-right: 0.5rem;
        }
        
        .feature-card {
            background: var(--buffer-bg-primary);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--buffer-shadow);
            border: 1px solid var(--buffer-border);
            transition: all 0.2s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--buffer-primary);
            margin-bottom: 1rem;
        }
        
        .feature-card h4, .feature-card h5 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .feature-card p {
            color: var(--buffer-text-secondary);
            margin: 0;
        }
        
        .alert {
            border-radius: 8px;
            border: 1px solid var(--buffer-border);
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .alert-info {
            background: #EBF8FF;
            border-color: #BEE3F8;
            color: var(--buffer-text-primary);
        }
        
        .alert-danger {
            background: #FED7D7;
            border-color: #FEB2B2;
            color: #C53030;
        }
        
        .alert-success {
            background: #F0FFF4;
            border-color: #C6F6D5;
            color: #22543D;
        }
        
        .alert-danger .alert-link {
            color: #C53030;
            font-weight: 600;
        }
        
        .text-muted {
            color: var(--buffer-text-muted) !important;
        }
        
        /* Upload page specific styles */
        .upload-form {
            background: var(--buffer-bg-primary);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: var(--buffer-shadow-lg);
            border: 1px solid var(--buffer-border);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            border: 2px solid var(--buffer-border);
            padding: 0.75rem 1rem;
            transition: all 0.2s ease;
            font-size: 1rem;
            background: var(--buffer-bg-primary);
            color: var(--buffer-text-primary);
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--buffer-primary);
            box-shadow: 0 0 0 3px rgba(22, 142, 234, 0.1);
            outline: none;
        }
        
        .form-label {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .btn-primary {
            background: var(--buffer-primary);
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-weight: 600;
            transition: all 0.2s ease;
            color: white;
            box-shadow: var(--buffer-shadow);
        }
        
        .btn-primary:hover {
            background: var(--buffer-primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .btn-outline-primary {
            background: transparent;
            border: 2px solid var(--buffer-primary);
            color: var(--buffer-primary);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .btn-outline-primary:hover {
            background: var(--buffer-primary);
            color: white;
            transform: translateY(-1px);
        }
        
        .progress {
            border-radius: 8px;
            height: 12px;
            background: var(--buffer-bg-light);
        }
        
        .progress-bar {
            background: var(--buffer-primary);
            border-radius: 8px;
        }
        
        .card {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            box-shadow: var(--buffer-shadow);
        }
        
        .card-title {
            color: var(--buffer-text-primary);
            font-weight: 600;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header {
                padding: 2rem 0;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .header p {
                font-size: 1.125rem;
            }
            
            .content-area {
                padding: 1.5rem;
                margin: 1.5rem 0;
            }
            
            .feature-card {
                padding: 1.5rem;
            }
            
            .upload-form {
                padding: 1.5rem;
            }
            
            .btn-buffer {
                padding: 0.875rem 1.5rem;
                font-size: 0.875rem;
            }
        }
        
        /* Smooth animations */
        * {
            transition: all 0.2s ease;
        }
        
        /* Focus states for accessibility */
        .btn-buffer:focus,
        .form-control:focus,
        .form-select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(22, 142, 234, 0.1);
        }
        
        /* Loading states */
        .btn-buffer:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--buffer-bg-light);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--buffer-text-muted);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--buffer-text-secondary);
        }
        
        /* Navigation Styles */
        .navbar {
            background: var(--buffer-bg-primary);
            border-bottom: 1px solid var(--buffer-border);
            padding: 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 60px;
        }
        
        .navbar-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--buffer-text-primary);
        }
        
        .navbar-nav {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--buffer-text-secondary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        .nav-link:hover {
            color: var(--buffer-primary);
            background: var(--buffer-bg-light);
            text-decoration: none;
        }
        
        .nav-link.active {
            color: var(--buffer-primary);
            background: var(--buffer-bg-light);
        }
        
        .navbar-user {
            position: relative;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .user-profile:hover {
            background: var(--buffer-bg-light);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--buffer-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.875rem;
        }
        
        .user-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            box-shadow: var(--buffer-shadow-lg);
            min-width: 150px;
            display: none;
            z-index: 1001;
        }
        
        .user-menu.show {
            display: block;
        }
        
        .user-menu-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--buffer-text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
        }
        
        .user-menu-item:hover {
            background: var(--buffer-bg-light);
            color: var(--buffer-text-primary);
            text-decoration: none;
        }
        
        .main-content {
            margin-top: 60px;
        }
        
        /* Modal Styles */
        .modal-content {
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .modal-header {
            border-bottom: 1px solid var(--buffer-border);
            padding: 1.5rem;
        }
        
        .modal-title {
            color: var(--buffer-text-primary);
            font-weight: 600;
        }
        
        .social-channels {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .channel-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            border: 2px solid var(--buffer-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
            position: relative;
        }
        
        .channel-item.active {
            border-color: var(--buffer-primary);
            background: rgba(22, 142, 234, 0.05);
        }
        
        .channel-item.coming-soon {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .channel-item i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .channel-item span {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .channel-item small {
            position: absolute;
            bottom: -1.5rem;
            font-size: 0.75rem;
            color: var(--buffer-text-muted);
        }
        
        .upload-placeholder {
            border: 2px dashed var(--buffer-border);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .upload-placeholder:hover {
            border-color: var(--buffer-primary);
            background: rgba(22, 142, 234, 0.05);
        }
        
        .selected-file {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: var(--buffer-bg-light);
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            margin-top: 0.5rem;
        }
        
        .selected-file i {
            color: var(--buffer-primary);
        }
        
        .upload-placeholder i {
            font-size: 2rem;
            color: var(--buffer-text-muted);
            margin-bottom: 0.5rem;
        }
        
        .post-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .modal-footer {
            border-top: 1px solid var(--buffer-border);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .schedule-options label {
            display: block;
            font-size: 0.875rem;
            color: var(--buffer-text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .schedule-options .form-select,
        .schedule-options .form-control {
            border: 1px solid var(--buffer-border);
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }
        
        .schedule-options .form-select:focus,
        .schedule-options .form-control:focus {
            border-color: var(--buffer-primary);
            box-shadow: 0 0 0 0.2rem rgba(22, 142, 234, 0.25);
            outline: none;
        }
        
        #scheduleDateTime {
            transition: all 0.3s ease;
        }
        
        /* Publish Section Styles */
        .publish-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .publish-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .publish-tabs {
            display: flex;
            gap: 1rem;
            border-bottom: 1px solid var(--buffer-border);
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 1rem 0;
            color: var(--buffer-text-secondary);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .tab-btn.active {
            color: var(--buffer-primary);
            border-bottom-color: var(--buffer-primary);
        }
        
        .tab-btn .badge {
            background: var(--buffer-bg-light);
            color: var(--buffer-text-muted);
            border-radius: 12px;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
        }
        
        .empty-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--buffer-bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        
        .empty-icon i {
            font-size: 2rem;
            color: var(--buffer-primary);
        }
        
        .empty-state h3 {
            color: var(--buffer-text-primary);
            margin-bottom: 0.5rem;
        }
        
        .empty-state p {
            color: var(--buffer-text-secondary);
            margin-bottom: 2rem;
        }
        
        /* Templates Section Styles */
        .templates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .template-categories {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        
        .category-btn {
            background: var(--buffer-bg-light);
            border: 1px solid var(--buffer-border);
            color: var(--buffer-text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .category-btn.active {
            background: var(--buffer-primary);
            color: white;
            border-color: var(--buffer-primary);
        }
        
        .category-btn:hover {
            border-color: var(--buffer-primary);
            color: var(--buffer-primary);
        }
        

        
        .template-card {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .template-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .template-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .template-card h4 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 1.125rem;
        }
        
        .template-card p {
            color: var(--buffer-text-secondary);
            margin: 0;
            line-height: 1.5;
        }
        
        .template-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--buffer-success);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .template-actions {
            margin-top: auto;
            padding-top: 1rem;
        }
        
        /* Publish Page Specific Styles */
        .publish-header-section {
            padding: 2rem 0 1rem 0;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--buffer-text-primary);
            margin: 0;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .header-actions .btn {
            padding: 0.5rem 1rem;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }
        
        .header-actions .btn-outline-secondary {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            color: var(--buffer-text-secondary);
        }
        
        .header-actions .btn-outline-secondary:hover {
            background: var(--buffer-bg-light);
            border-color: var(--buffer-primary);
            color: var(--buffer-primary);
        }
        
        .header-actions .btn-primary {
            background: var(--buffer-primary);
            border: 1px solid var(--buffer-primary);
            color: white;
            font-weight: 600;
        }
        
        .header-actions .btn-primary:hover {
            background: var(--buffer-primary-dark);
            border-color: var(--buffer-primary-dark);
        }
        
        .publish-tabs-section {
            border-bottom: 1px solid var(--buffer-border);
            margin-bottom: 2rem;
        }
        
        .tabs-container {
            display: flex;
            gap: 2rem;
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 1rem 0;
            color: var(--buffer-text-secondary);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-size: 0.9375rem;
        }
        
        .tab-btn:hover {
            color: var(--buffer-primary);
        }
        
        .tab-btn.active {
            color: var(--buffer-primary);
            border-bottom-color: var(--buffer-primary);
        }
        
        .tab-btn .badge {
            background: var(--buffer-bg-light);
            color: var(--buffer-text-muted);
            border-radius: 12px;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            margin-left: 0.5rem;
            font-weight: 500;
        }
        
        .tab-btn.active .badge {
            background: rgba(22, 142, 234, 0.1);
            color: var(--buffer-primary);
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .empty-state {
            padding: 4rem 2rem;
        }
        
        .empty-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--buffer-bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        
        .empty-icon i {
            font-size: 2rem;
            color: var(--buffer-primary);
        }
        
        .empty-state h3 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .empty-state p {
            color: var(--buffer-text-secondary);
            margin-bottom: 2rem;
            font-size: 1rem;
        }
        
        /* Create Page Sidebar Styles */
        .create-sidebar {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            height: fit-content;
            position: sticky;
            top: 80px;
        }
        
        .sidebar-section {
            margin-bottom: 2rem;
        }
        
        .sidebar-section:last-child {
            margin-bottom: 0;
        }
        
        .sidebar-title {
            color: var(--buffer-text-primary);
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            color: var(--buffer-text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 6px;
            margin-bottom: 0.25rem;
        }
        
        .sidebar-item:hover {
            color: var(--buffer-primary);
            background: var(--buffer-bg-light);
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .sidebar-item.active {
            color: var(--buffer-primary);
            background: rgba(22, 142, 234, 0.1);
            font-weight: 600;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .sidebar-item i {
            margin-right: 0.75rem;
            width: 16px;
            font-size: 0.875rem;
        }
        
        .sidebar-item span {
            flex: 1;
        }
        
        .badge-new {
            background: var(--buffer-success);
            color: white;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.625rem;
            font-weight: 600;
        }
        
        .main-content-area {
            padding: 2rem 1rem;
        }
        
        /* Ideas Section Styles */
        .ideas-header h2 {
            color: var(--buffer-text-primary);
            font-weight: 700;
        }
        
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .kanban-column {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .column-header {
            padding: 1rem;
            border-bottom: 1px solid var(--buffer-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .column-header h5 {
            margin: 0;
            color: var(--buffer-text-primary);
            font-weight: 600;
            font-size: 0.9375rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .column-header .count {
            background: var(--buffer-bg-light);
            color: var(--buffer-text-muted);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .add-item-btn {
            width: 24px;
            height: 24px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        
        .column-content {
            flex: 1;
            padding: 1rem;
            min-height: 300px;
        }
        
        .idea-card {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: move;
            transition: all 0.2s ease;
        }
        
        .idea-card:hover {
            transform: translateY(-1px);
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .idea-card h6 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .idea-card p {
            color: var(--buffer-text-secondary);
            font-size: 0.8125rem;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        
        .idea-actions {
            display: flex;
            gap: 0.25rem;
            justify-content: flex-end;
        }
        
        .idea-actions .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }
        
        .add-idea-placeholder {
            padding: 1rem;
            text-align: center;
            color: var(--buffer-text-muted);
            cursor: pointer;
            border: 2px dashed var(--buffer-border);
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .add-idea-placeholder:hover {
            background: var(--buffer-bg-light);
            color: var(--buffer-primary);
            border-color: var(--buffer-primary);
        }
        
        .upload-sidebar {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            padding: 1.5rem;
        }
        
        .sidebar-section {
            margin-bottom: 2rem;
        }
        
        .sidebar-section:last-child {
            margin-bottom: 0;
        }
        
        .sidebar-section h6 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .tips-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .tips-list li {
            color: var(--buffer-text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            position: relative;
        }
        
        .tips-list li:before {
            content: "â€¢";
            color: var(--buffer-primary);
            position: absolute;
            left: 0;
        }
        
        .selected-file {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: var(--buffer-bg-light);
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            margin-top: 0.5rem;
        }
        
        .selected-file i {
            color: var(--buffer-primary);
        }
        
        .upload-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .scheduled-item {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--buffer-border);
        }
        
        .scheduled-item:last-child {
            border-bottom: none;
        }
        
        .scheduled-item h6 {
            color: var(--buffer-text-primary);
            font-size: 0.875rem;
            margin: 0;
        }
        
        .upload-history {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .history-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            background: var(--buffer-bg-primary);
        }
        
        .history-item.success {
            border-left: 4px solid var(--buffer-success);
        }
        
        .history-item.failed {
            border-left: 4px solid var(--buffer-danger);
        }
        
        .history-icon {
            flex-shrink: 0;
            margin-top: 0.25rem;
        }
        
        .history-content {
            flex: 1;
        }
        
        .history-content h6 {
            color: var(--buffer-text-primary);
            font-size: 0.9375rem;
            margin-bottom: 0.25rem;
        }
        
        .history-content p {
            margin-bottom: 0.5rem;
            font-size: 0.8125rem;
        }
        
        /* Enhanced Modal Styles */
        .modal-xl {
            max-width: 1200px;
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .upload-placeholder {
            text-align: center;
            padding: 3rem 2rem;
        }
        
        .upload-placeholder i {
            font-size: 3rem;
            color: var(--buffer-text-muted);
            margin-bottom: 1rem;
            display: block;
        }
        
        .upload-placeholder p {
            font-size: 1.125rem;
            color: var(--buffer-text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .upload-placeholder small {
            color: var(--buffer-text-muted);
        }
        
        /* Kanban Board Styles */
        .create-header {
            margin-bottom: 2rem;
        }
        
        .create-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .kanban-column {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .column-header {
            padding: 1rem;
            border-bottom: 1px solid var(--buffer-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .column-header h5 {
            margin: 0;
            color: var(--buffer-text-primary);
            font-weight: 600;
            font-size: 0.9375rem;
        }
        
        .column-header .count {
            background: var(--buffer-bg-light);
            color: var(--buffer-text-muted);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }
        
        .add-item-btn {
            width: 24px;
            height: 24px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .column-content {
            flex: 1;
            padding: 1rem;
            min-height: 300px;
        }
        
        .column-content.drag-over {
            background: rgba(22, 142, 234, 0.05);
        }
        
        .idea-card {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: move;
            transition: all 0.2s ease;
        }
        
        .idea-card:hover {
            transform: translateY(-1px);
            box-shadow: var(--buffer-shadow-lg);
        }
        
        .idea-card h6 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .idea-card p {
            color: var(--buffer-text-secondary);
            font-size: 0.8125rem;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        
        .idea-actions {
            display: flex;
            gap: 0.25rem;
            justify-content: flex-end;
        }
        
        .add-idea-placeholder {
            padding: 1rem;
            text-align: center;
            color: var(--buffer-text-muted);
            cursor: pointer;
            border-top: 1px solid var(--buffer-border);
            transition: all 0.2s ease;
        }
        
        .add-idea-placeholder:hover {
            background: var(--buffer-bg-light);
            color: var(--buffer-primary);
        }
        
        .create-sidebar {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 80px;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-menu li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            color: var(--buffer-text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .sidebar-menu li:hover {
            color: var(--buffer-primary);
        }
        
        .sidebar-menu li.active {
            color: var(--buffer-primary);
            font-weight: 600;
        }
        
        .sidebar-menu li i {
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .template-badge {
            background: var(--buffer-success);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            width: fit-content;
        }
        
        .template-badge-small {
            background: var(--buffer-success);
            color: white;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.625rem;
            font-weight: 600;
        }
        
        /* Templates Page Styles */
        
        .coming-soon-section {
            border-top: 1px solid var(--buffer-border);
            padding-top: 2rem;
        }
        
        .platform-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .platform-card {
            background: var(--buffer-bg-primary);
            border: 1px solid var(--buffer-border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .platform-card.coming-soon {
            opacity: 0.7;
        }
        
        .platform-card i {
            font-size: 2rem;
            color: var(--buffer-primary);
            margin-bottom: 1rem;
        }
        
        .platform-card h5 {
            color: var(--buffer-text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .platform-card p {
            color: var(--buffer-text-secondary);
            margin: 0;
        }
        
        .coming-soon-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--buffer-warning);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .template-preview {
            background: var(--buffer-bg-light);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .platform-selection {
            margin-top: 1rem;
        }
        
        .platform-options {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .platform-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            border: 2px solid var(--buffer-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
            position: relative;
        }
        
        .platform-option.active {
            border-color: var(--buffer-primary);
            background: rgba(22, 142, 234, 0.05);
        }
        
        .platform-option.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .platform-option i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .platform-option span {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .platform-option small {
            position: absolute;
            bottom: -1.5rem;
            font-size: 0.75rem;
            color: var(--buffer-text-muted);
        }
        
        /* Responsive adjustments for new components */
        @media (max-width: 768px) {
            .navbar-nav {
                gap: 1rem;
            }
            
            .nav-link {
                padding: 0.5rem;
            }
            
            .nav-link span {
                display: none;
            }
            
            .publish-header,
            .templates-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .publish-actions,
            .templates-actions {
                justify-content: center;
            }
            
            .social-channels {
                justify-content: center;
            }
            
            .header-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .header-actions .btn {
                width: 100%;
                justify-content: center;
            }
            
            .page-title {
                font-size: 2rem;
                text-align: center;
                margin-bottom: 1rem;
            }
            
            .tabs-container {
                flex-wrap: wrap;
                gap: 1rem;
                justify-content: center;
            }
            
            .create-sidebar {
                margin-top: 1rem;
                position: static;
            }
            
            .main-content-area {
                padding: 1rem 0;
            }
            
            .kanban-board {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .kanban-column {
                min-height: 300px;
            }
            
            .ideas-header .header-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .ideas-header .header-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar" id="mainNavbar" style="display: none;">
        <div class="navbar-container">
            <div class="navbar-brand">
                <i class="fab fa-youtube" style="color: var(--buffer-primary); margin-right: 0.5rem;"></i>
                <span>YouTube Uploader</span>
            </div>
            
            <div class="navbar-nav">
                <a href="/create" class="nav-link">
                    <i class="fas fa-lightbulb"></i> Create
                </a>
                <a href="/publish" class="nav-link">
                    <i class="fas fa-calendar"></i> Publish
                </a>
                <a href="/templates" class="nav-link">
                    <i class="fas fa-layer-group"></i> Templates
                </a>
            </div>
            
            <div class="navbar-user">
                <div class="user-profile" onclick="toggleUserMenu()">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <i class="fas fa-chevron-down" id="userMenuIcon"></i>
                </div>
                <div class="user-menu" id="userMenu">
                    <a href="/logout" class="user-menu-item">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        {% block content %}{% endblock %}
    </div>
    
    <!-- Post Creation Modal -->
    <div class="modal fade" id="createPostModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="social-channels mb-4">
                        <div class="channel-item active" data-platform="youtube">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </div>
                        <div class="channel-item coming-soon" data-platform="instagram">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram</span>
                            <small>Coming Soon</small>
                        </div>
                        <div class="channel-item coming-soon" data-platform="facebook">
                            <i class="fab fa-facebook"></i>
                            <span>Facebook</span>
                            <small>Coming Soon</small>
                        </div>
                        <div class="channel-item coming-soon" data-platform="twitter">
                            <i class="fab fa-twitter"></i>
                            <span>Twitter</span>
                            <small>Coming Soon</small>
                        </div>
                    </div>
                    
                    <div class="post-content">
                        <!-- Video Title -->
                        <div class="mb-3">
                            <label for="videoTitle" class="form-label">Video Title *</label>
                            <input type="text" class="form-control" id="videoTitle" placeholder="Enter video title" maxlength="100" required>
                            <div class="form-text"><span id="titleCounter">0</span>/100 characters</div>
                        </div>
                        
                        <!-- Video Description -->
                        <div class="mb-3">
                            <label for="videoDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="videoDescription" placeholder="Describe your video..." rows="4" maxlength="5000"></textarea>
                            <div class="form-text"><span id="descCounter">0</span>/5000 characters</div>
                        </div>
                        
                        <!-- Tags -->
                        <div class="mb-3">
                            <label for="videoTags" class="form-label">Tags</label>
                            <input type="text" class="form-control" id="videoTags" placeholder="Enter tags separated by commas">
                            <div class="form-text">Separate tags with commas (e.g., gaming, tutorial, review)</div>
                        </div>
                        
                        <!-- File Upload -->
                        <div class="mb-3">
                            <label class="form-label">Video File *</label>
                            <div class="file-upload-area">
                                <div class="upload-placeholder" id="uploadPlaceholder">
                                    <i class="fas fa-video"></i>
                                    <p>Drag & drop or select a video file</p>
                                    <input type="file" id="postFile" accept="video/*" style="display: none;">
                                </div>
                                <div id="selectedFile" class="selected-file" style="display: none;">
                                    <i class="fas fa-file"></i>
                                    <span id="fileName"></span>
                                    <button type="button" class="btn btn-sm btn-outline-danger ms-auto" onclick="removeFile()">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Privacy Settings -->
                        <div class="mb-3">
                            <label for="privacyStatus" class="form-label">Privacy</label>
                            <select class="form-select" id="privacyStatus">
                                <option value="private">Private</option>
                                <option value="unlisted">Unlisted</option>
                                <option value="public">Public</option>
                            </select>
                        </div>
                        
                        <!-- Upload Progress -->
                        <div id="uploadProgress" class="mb-3" style="display: none;">
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="text-center mt-2">
                                <span id="progressText">Uploading... 0%</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="schedule-options flex-grow-1">
                        <div class="row">
                            <div class="col-md-6">
                                <label for="scheduleType" class="form-label">When to Post</label>
                                <select class="form-select" id="scheduleType" onchange="toggleScheduleOptions()">
                                    <option value="now">Post Now</option>
                                    <option value="schedule">Schedule for later</option>
                                    <option value="draft">Save as draft</option>
                                </select>
                            </div>
                            <div class="col-md-6" id="scheduleDateTime" style="display: none;">
                                <label for="scheduleTime" class="form-label">Schedule Date & Time</label>
                                <input type="datetime-local" class="form-control" id="scheduleTime">
                            </div>
                        </div>
                    </div>
                    <div class="ms-3">
                        <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="submitBtn" onclick="handlePostSubmit()">
                            <i class="fas fa-paper-plane"></i> <span id="submitText">Post Now</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Global navigation functions
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            const icon = document.getElementById('userMenuIcon');
            menu.classList.toggle('show');
            icon.style.transform = menu.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
        
        function showSection(section) {
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            event.target.closest('.nav-link').classList.add('active');
            
            // Handle different sections
            switch(section) {
                case 'templates':
                    window.location.href = '/templates';
                    break;
                case 'create':
                    showCreateModal();
                    break;
                case 'publish':
                    showPublishSection();
                    break;
            }
        }
        
        function showCreateModal() {
            const modal = new bootstrap.Modal(document.getElementById('createPostModal'));
            modal.show();
        }
        
        function showPublishSection() {
            document.getElementById('mainContent').innerHTML = `
                <div class="container">
                    <div class="publish-header mb-4">
                        <h2>All Channels</h2>
                        <div class="publish-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-share"></i> Share Feedback
                            </button>
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-list"></i> List
                            </button>
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-calendar"></i> Calendar
                            </button>
                            <button class="btn btn-primary" onclick="showCreateModal()">
                                <i class="fas fa-plus"></i> New Post
                            </button>
                        </div>
                    </div>
                    
                    <div class="publish-tabs mb-4">
                        <button class="tab-btn active">Queue <span class="badge">0</span></button>
                        <button class="tab-btn">Drafts <span class="badge">0</span></button>
                        <button class="tab-btn">Approvals <span class="badge">0</span></button>
                        <button class="tab-btn">Sent <span class="badge">68</span></button>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3>No posts scheduled</h3>
                        <p>Schedule some posts and they will appear here</p>
                        <button class="btn btn-primary" onclick="showCreateModal()">
                            <i class="fas fa-plus"></i> New Post
                        </button>
                    </div>
                </div>
            `;
        }
        
        function showTemplatesSection() {
            document.getElementById('mainContent').innerHTML = `
                <div class="container">
                    <div class="templates-header mb-4">
                        <h2>Templates</h2>
                        <div class="templates-actions">
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-share"></i> Share Feedback
                            </button>
                        </div>
                    </div>
                    
                    <div class="template-categories mb-4">
                        <button class="category-btn active">All</button>
                        <button class="category-btn">Tip</button>
                        <button class="category-btn">Case Study</button>
                        <button class="category-btn">Story</button>
                        <button class="category-btn">How-to</button>
                        <button class="category-btn">Question</button>
                        <button class="category-btn">Opinion</button>
                        <button class="category-btn">List</button>
                        <button class="category-btn">Behind the scenes</button>
                    </div>
                    
                    <div class="templates-grid">
                        ${generateTemplateCards()}
                    </div>
                </div>
            `;
        }
        
        function generateTemplateCards() {
            const templates = [
                {
                    icon: 'ðŸŒ™',
                    title: 'Share how you wind down at night',
                    description: 'Show your audience how you disconnect, reflect, or prep for the next day.'
                },
                {
                    icon: 'â˜€ï¸',
                    title: 'Share how you optimize your morning workflow',
                    description: 'Walk your audience through a personal morning routine or work setup that boosts productivity.'
                },
                {
                    icon: 'âœï¸',
                    title: 'Introduce (or reintroduce) yourself',
                    description: 'Tell your audience who you are, what you create content about, and who it\'s for.',
                    badge: 'New'
                },
                {
                    icon: 'ðŸ’¡',
                    title: 'One habit I swear by â€” and one I\'m quitting',
                    description: 'Share a personal contrast and invite your audience to do the same.'
                },
                {
                    icon: 'ðŸ“°',
                    title: '5 newsletters I never miss',
                    description: 'Curate a list of high-value newsletters for your niche â€” and share why they\'re worth it.'
                },
                {
                    icon: 'ðŸ¤«',
                    title: 'This feature is slept on',
                    description: 'Highlight an underrated feature of your product or offer that consistently delivers results.'
                },
                {
                    icon: 'ðŸ”¥',
                    title: 'What\'s your unpopular opinion about [industry/topic]?',
                    description: 'Invite bold responses and challenge the status quo.'
                },
                {
                    icon: 'ðŸŽ¯',
                    title: 'Behind the scenes of my content creation',
                    description: 'Show your process, tools, and workspace to build connection with your audience.'
                }
            ];
            
            return templates.map(template => `
                <div class="template-card">
                    <div class="template-icon">${template.icon}</div>
                    <h4>${template.title}</h4>
                    <p>${template.description}</p>
                    ${template.badge ? `<span class="template-badge">${template.badge}</span>` : ''}
                </div>
            `).join('');
        }
        
        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const userProfile = document.querySelector('.user-profile');
            
            if (userMenu && !userProfile.contains(event.target)) {
                userMenu.classList.remove('show');
                document.getElementById('userMenuIcon').style.transform = 'rotate(0deg)';
            }
        });
        
        // Show navbar when user is logged in
        function showNavbar() {
            document.getElementById('mainNavbar').style.display = 'block';
        }
        
        // Initialize based on current page
        document.addEventListener('DOMContentLoaded', function() {
            // Show navbar if user is on any authenticated page (logged in)
            const authenticatedPages = ['/templates', '/publish', '/create'];
            if (authenticatedPages.includes(window.location.pathname)) {
                showNavbar();
            }
            
            // Initialize file upload functionality
            initializeFileUpload();
            
            // Initialize character counters
            initializeCharacterCounters();
            
            // Load upload history
            loadUploadHistory();
        });
        
        function initializeFileUpload() {
            const uploadPlaceholder = document.getElementById('uploadPlaceholder');
            const fileInput = document.getElementById('postFile');
            const selectedFile = document.getElementById('selectedFile');
            const fileName = document.getElementById('fileName');
            
            if (!uploadPlaceholder || !fileInput) return;
            
            // Click to select file
            uploadPlaceholder.addEventListener('click', function() {
                fileInput.click();
            });
            
            // File input change
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    handleFileSelect(file);
                }
            });
            
            // Drag and drop functionality
            uploadPlaceholder.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadPlaceholder.style.borderColor = 'var(--buffer-primary)';
                uploadPlaceholder.style.background = 'rgba(22, 142, 234, 0.05)';
            });
            
            uploadPlaceholder.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadPlaceholder.style.borderColor = 'var(--buffer-border)';
                uploadPlaceholder.style.background = 'transparent';
            });
            
            uploadPlaceholder.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadPlaceholder.style.borderColor = 'var(--buffer-border)';
                uploadPlaceholder.style.background = 'transparent';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type.startsWith('video/') || file.type.startsWith('image/')) {
                        fileInput.files = files;
                        handleFileSelect(file);
                    } else {
                        alert('Please select a video or image file.');
                    }
                }
            });
            
            function handleFileSelect(file) {
                // Validate file type
                if (!file.type.startsWith('video/') && !file.type.startsWith('image/')) {
                    alert('Please select a video or image file.');
                    return;
                }
                
                // Validate file size (50MB limit for demo)
                const maxSize = 50 * 1024 * 1024; // 50MB
                if (file.size > maxSize) {
                    alert('File size must be less than 50MB.');
                    return;
                }
                
                // Show selected file
                fileName.textContent = file.name;
                uploadPlaceholder.style.display = 'none';
                selectedFile.style.display = 'flex';
                
                // Update placeholder icon based on file type
                const fileIcon = selectedFile.querySelector('i');
                if (file.type.startsWith('video/')) {
                    fileIcon.className = 'fas fa-video';
                } else if (file.type.startsWith('image/')) {
                    fileIcon.className = 'fas fa-image';
                }
            }
        }
        
        function removeFile() {
            const uploadPlaceholder = document.getElementById('uploadPlaceholder');
            const fileInput = document.getElementById('postFile');
            const selectedFile = document.getElementById('selectedFile');
            
            if (uploadPlaceholder && fileInput && selectedFile) {
                fileInput.value = '';
                uploadPlaceholder.style.display = 'block';
                selectedFile.style.display = 'none';
            }
        }
        
        function initializeCharacterCounters() {
            const titleInput = document.getElementById('videoTitle');
            const descInput = document.getElementById('videoDescription');
            const titleCounter = document.getElementById('titleCounter');
            const descCounter = document.getElementById('descCounter');
            
            if (titleInput && titleCounter) {
                titleInput.addEventListener('input', function() {
                    titleCounter.textContent = this.value.length;
                });
            }
            
            if (descInput && descCounter) {
                descInput.addEventListener('input', function() {
                    descCounter.textContent = this.value.length;
                });
            }
        }
        
        function initializeScheduleDateTime() {
            const scheduleTimeInput = document.getElementById('scheduleTime');
            if (scheduleTimeInput) {
                // Set minimum date to current date/time
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                
                const minDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
                scheduleTimeInput.min = minDateTime;
                
                // Set default to 1 hour from now
                const oneHourLater = new Date(now.getTime() + 60 * 60 * 1000);
                const defaultYear = oneHourLater.getFullYear();
                const defaultMonth = String(oneHourLater.getMonth() + 1).padStart(2, '0');
                const defaultDay = String(oneHourLater.getDate()).padStart(2, '0');
                const defaultHours = String(oneHourLater.getHours()).padStart(2, '0');
                const defaultMinutes = String(oneHourLater.getMinutes()).padStart(2, '0');
                
                const defaultDateTime = `${defaultYear}-${defaultMonth}-${defaultDay}T${defaultHours}:${defaultMinutes}`;
                scheduleTimeInput.value = defaultDateTime;
            }
        }
        
        function toggleScheduleOptions() {
            const scheduleType = document.getElementById('scheduleType').value;
            const scheduleDateTime = document.getElementById('scheduleDateTime');
            const submitText = document.getElementById('submitText');
            
            if (scheduleType === 'schedule') {
                scheduleDateTime.style.display = 'block';
                submitText.textContent = 'Schedule Upload';
                // Initialize the datetime input when scheduling is selected
                initializeScheduleDateTime();
            } else if (scheduleType === 'draft') {
                scheduleDateTime.style.display = 'none';
                submitText.textContent = 'Save as Draft';
            } else {
                scheduleDateTime.style.display = 'none';
                submitText.textContent = 'Post Now';
            }
        }
        
        function handlePostSubmit() {
            const fileInput = document.getElementById('postFile');
            const title = document.getElementById('videoTitle').value;
            const description = document.getElementById('videoDescription').value;
            const tags = document.getElementById('videoTags').value;
            const privacy = document.getElementById('privacyStatus').value;
            const scheduleType = document.getElementById('scheduleType').value;
            const scheduleTime = document.getElementById('scheduleTime').value;
            
            // Validation
            if (!fileInput.files[0]) {
                alert('Please select a video file to upload.');
                return;
            }
            
            if (!title.trim()) {
                alert('Please enter a video title.');
                return;
            }
            
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('video_file', file);
            formData.append('title', title);
            formData.append('description', description);
            formData.append('tags', tags);
            formData.append('privacy_status', privacy);
            
            if (scheduleType === 'schedule' && scheduleTime) {
                formData.append('schedule_time', new Date(scheduleTime).toISOString());
            }
            
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const progressContainer = document.getElementById('uploadProgress');
            const progressBar = progressContainer.querySelector('.progress-bar');
            const progressText = document.getElementById('progressText');
            
            submitBtn.disabled = true;
            progressContainer.style.display = 'block';
            
            // Create XMLHttpRequest for progress tracking
            const xhr = new XMLHttpRequest();
            
            xhr.upload.addEventListener('progress', function(e) {
                if (e.lengthComputable) {
                    const percentComplete = (e.loaded / e.total) * 100;
                    progressBar.style.width = percentComplete + '%';
                    progressText.textContent = `Uploading... ${Math.round(percentComplete)}%`;
                }
            });
            
            xhr.addEventListener('load', function() {
                try {
                    const response = JSON.parse(xhr.responseText);
                    if (xhr.status === 200) {
                        // Success
                        const uploadResult = {
                            title: title,
                            status: scheduleType === 'schedule' ? 'scheduled' : 'uploaded',
                            timestamp: new Date().toISOString(),
                            videoId: response.video_id,
                            videoUrl: response.video_url,
                            message: response.message
                        };
                        
                        // Save to history
                        saveUploadHistory(uploadResult);
                        
                        // Show success message with link
                        let successMessage = response.message;
                        if (response.video_url) {
                            successMessage += `\n\nView your video: ${response.video_url}`;
                        }
                        alert(successMessage);
                        
                        // Close modal and reset
                        bootstrap.Modal.getInstance(document.getElementById('createPostModal')).hide();
                        resetUploadForm();
                    } else {
                        throw new Error(response.error || 'Upload failed');
                    }
                } catch (error) {
                    // Error
                    const uploadResult = {
                        title: title,
                        status: 'failed',
                        timestamp: new Date().toISOString(),
                        error: error.message || 'Unknown error'
                    };
                    
                    saveUploadHistory(uploadResult);
                    alert('Upload failed: ' + error.message);
                }
                
                // Reset form state
                submitBtn.disabled = false;
                progressContainer.style.display = 'none';
                progressBar.style.width = '0%';
            });
            
            xhr.addEventListener('error', function() {
                const uploadResult = {
                    title: title,
                    status: 'failed',
                    timestamp: new Date().toISOString(),
                    error: 'Network error'
                };
                
                saveUploadHistory(uploadResult);
                alert('Network error: Failed to connect to server.');
                
                submitBtn.disabled = false;
                progressContainer.style.display = 'none';
                progressBar.style.width = '0%';
            });
            
            xhr.open('POST', '/upload_video');
            xhr.send(formData);
        }
        
        function resetUploadForm() {
            document.getElementById('videoTitle').value = '';
            document.getElementById('videoDescription').value = '';
            document.getElementById('videoTags').value = '';
            document.getElementById('privacyStatus').value = 'private';
            document.getElementById('scheduleType').value = 'now';
            document.getElementById('scheduleTime').value = '';
            document.getElementById('titleCounter').textContent = '0';
            document.getElementById('descCounter').textContent = '0';
            removeFile();
            toggleScheduleOptions();
            
            // Hide the schedule datetime input
            const scheduleDateTime = document.getElementById('scheduleDateTime');
            if (scheduleDateTime) {
                scheduleDateTime.style.display = 'none';
            }
        }
        
        function saveUploadHistory(uploadResult) {
            let history = JSON.parse(localStorage.getItem('uploadHistory') || '[]');
            history.unshift(uploadResult); // Add to beginning
            history = history.slice(0, 50); // Keep only last 50 uploads
            localStorage.setItem('uploadHistory', JSON.stringify(history));
        }
        
        function loadUploadHistory() {
            // This will be used in the publish page to show history
            return JSON.parse(localStorage.getItem('uploadHistory') || '[]');
        }
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
