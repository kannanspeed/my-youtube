{% extends "base.html" %}

{% block content %}
<div id="mainContent">
    <div class="container">
        <!-- Header Section -->
        <div class="templates-header mb-5">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="mb-0" style="color: var(--buffer-text-primary); font-weight: 700;">Templates</h2>
                    <p class="mb-0 mt-2" style="color: var(--buffer-text-secondary);">Ready-to-use content templates for your YouTube channel</p>
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-outline-primary">
                        <i class="fas fa-share me-2"></i>Share Feedback
                    </button>
                </div>
            </div>
        </div>

        <!-- Template Categories -->
        <div class="template-categories mb-5">
            <div class="d-flex flex-wrap justify-content-center justify-content-md-start gap-2">
                <button class="category-btn active" data-category="all">All</button>
                <button class="category-btn" data-category="tip">Tip</button>
                <button class="category-btn" data-category="case-study">Case Study</button>
                <button class="category-btn" data-category="story">Story</button>
                <button class="category-btn" data-category="how-to">How-to</button>
                <button class="category-btn" data-category="question">Question</button>
                <button class="category-btn" data-category="opinion">Opinion</button>
                <button class="category-btn" data-category="list">List</button>
                <button class="category-btn" data-category="behind-scenes">Behind the scenes</button>
                <button class="category-btn" data-category="more">More <i class="fas fa-chevron-down ms-1"></i></button>
            </div>
        </div>

        <!-- Templates Grid -->
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="how-to">
                    <div class="template-icon">üåô</div>
                    <h4>Walk through your midday reset ritual</h4>
                    <p>Walk your audience through the small habits or actions that help you reset and refocus halfway through the day.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="story">
                    <div class="template-icon">üåô</div>
                    <h4>Share how you wind down at night</h4>
                    <p>Show your audience how you disconnect, reflect, or prep for the next day.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="how-to">
                    <div class="template-icon">‚òÄÔ∏è</div>
                    <h4>Share how you optimize your morning workflow</h4>
                    <p>Walk your audience through a personal morning routine or work setup that boosts productivity.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="story">
                    <div class="template-icon">‚úçÔ∏è</div>
                    <h4>Introduce (or reintroduce) yourself</h4>
                    <p>Tell your audience who you are, what you create content about, and who it's for.</p>
                    <div class="template-badge">New</div>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="story">
                    <div class="template-icon">üí°</div>
                    <h4>One habit I swear by ‚Äî and one I'm quitting</h4>
                    <p>Share a personal contrast and invite your audience to do the same.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="list">
                    <div class="template-icon">üì∞</div>
                    <h4>5 newsletters I never miss</h4>
                    <p>Curate a list of high-value newsletters for your niche ‚Äî and share why they're worth it.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="tip">
                    <div class="template-icon">ü§´</div>
                    <h4>This feature is slept on</h4>
                    <p>Highlight an underrated feature of your product or offer that consistently delivers results.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="question">
                    <div class="template-icon">üî•</div>
                    <h4>What's your unpopular opinion about [industry/topic]?</h4>
                    <p>Invite bold responses and challenge the status quo.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="behind-scenes">
                    <div class="template-icon">üéØ</div>
                    <h4>Behind the scenes of my content creation</h4>
                    <p>Show your process, tools, and workspace to build connection with your audience.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="case-study">
                    <div class="template-icon">üìä</div>
                    <h4>My biggest content marketing win</h4>
                    <p>Share a success story and the lessons learned from your content marketing efforts.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="tip">
                    <div class="template-icon">‚ö°</div>
                    <h4>Quick tip for [specific problem]</h4>
                    <p>Share a actionable tip that solves a common problem your audience faces.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="template-card h-100" data-category="opinion">
                    <div class="template-icon">üé≠</div>
                    <h4>Why I changed my mind about [topic]</h4>
                    <p>Share how your perspective evolved and what influenced the change.</p>
                    <div class="template-actions mt-auto">
                        <button class="btn btn-outline-primary btn-sm" onclick="useTemplate(this)">Use Template</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coming Soon Section -->
        <div class="coming-soon-section mt-5">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="mb-4">More Platforms Coming Soon</h3>
                    <div class="platform-cards">
                        <div class="platform-card coming-soon">
                            <i class="fab fa-instagram"></i>
                            <h5>Instagram Templates</h5>
                            <p>Story templates, post ideas, and engagement strategies</p>
                            <div class="coming-soon-badge">Coming Soon</div>
                        </div>
                        
                        <div class="platform-card coming-soon">
                            <i class="fab fa-facebook"></i>
                            <h5>Facebook Templates</h5>
                            <p>Page post templates and community engagement ideas</p>
                            <div class="coming-soon-badge">Coming Soon</div>
                        </div>
                        
                        <div class="platform-card coming-soon">
                            <i class="fab fa-twitter"></i>
                            <h5>Twitter Templates</h5>
                            <p>Thread templates, tweet ideas, and viral content formats</p>
                            <div class="coming-soon-badge">Coming Soon</div>
                        </div>
                        
                        <div class="platform-card coming-soon">
                            <i class="fab fa-linkedin"></i>
                            <h5>LinkedIn Templates</h5>
                            <p>Professional post templates and thought leadership content</p>
                            <div class="coming-soon-badge">Coming Soon</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>

<!-- Template Usage Modal -->
<div class="modal fade" id="templateModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Use Template</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="template-preview">
                    <h4 id="templateTitle"></h4>
                    <p id="templateDescription"></p>
                </div>
                <div class="template-form mt-4">
                    <div class="mb-3">
                        <label class="form-label">Customize your content:</label>
                        <textarea class="form-control" id="templateContent" rows="5" placeholder="Customize this template for your audience..."></textarea>
                    </div>
                    <div class="platform-selection">
                        <label class="form-label">Select Platform:</label>
                        <div class="platform-options">
                            <div class="platform-option active">
                                <i class="fab fa-youtube"></i>
                                <span>YouTube</span>
                            </div>
                            <div class="platform-option disabled">
                                <i class="fab fa-instagram"></i>
                                <span>Instagram</span>
                                <small>Coming Soon</small>
                            </div>
                            <div class="platform-option disabled">
                                <i class="fab fa-facebook"></i>
                                <span>Facebook</span>
                                <small>Coming Soon</small>
                            </div>
                            <div class="platform-option disabled">
                                <i class="fab fa-twitter"></i>
                                <span>Twitter</span>
                                <small>Coming Soon</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-outline-primary" onclick="saveToIdeas()">Save to Ideas</button>
                <button type="button" class="btn btn-primary" onclick="createPost()">Create Post</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Show navigation for logged in users
    showNavbar();
    
    // Set active nav link
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.href.includes('/templates')) {
            link.classList.add('active');
        }
    });
    
    // Initialize category filtering
    initializeCategoryFiltering();
});

function initializeCategoryFiltering() {
    const categoryBtns = document.querySelectorAll('.category-btn');
    const templateCards = document.querySelectorAll('.template-card');
    
    categoryBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // Update active button
            categoryBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const category = this.dataset.category;
            
            // Filter templates
            templateCards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });
}

function useTemplate(button) {
    const card = button.closest('.template-card');
    const title = card.querySelector('h4').textContent;
    const description = card.querySelector('p').textContent;
    
    document.getElementById('templateTitle').textContent = title;
    document.getElementById('templateDescription').textContent = description;
    document.getElementById('templateContent').value = title + '\n\n' + description;
    
    const modal = new bootstrap.Modal(document.getElementById('templateModal'));
    modal.show();
}

function saveToIdeas() {
    const content = document.getElementById('templateContent').value;
    const title = document.getElementById('templateTitle').textContent;
    
    // Save to localStorage for ideas page
    let ideas = JSON.parse(localStorage.getItem('savedIdeas') || '[]');
    ideas.push({
        id: Date.now(),
        title: title,
        content: content,
        status: 'unassigned',
        timestamp: new Date().toISOString()
    });
    localStorage.setItem('savedIdeas', JSON.stringify(ideas));
    
    // Show success message
    alert('Template saved to Ideas!');
    
    // Close modal
    bootstrap.Modal.getInstance(document.getElementById('templateModal')).hide();
}

function createPost() {
    const content = document.getElementById('templateContent').value;
    const title = document.getElementById('templateTitle').textContent;
    
    // For now, redirect to upload page with pre-filled content
    localStorage.setItem('prefilledContent', JSON.stringify({
        title: title,
        description: content
    }));
    
    // Close modal and redirect
    bootstrap.Modal.getInstance(document.getElementById('templateModal')).hide();
    window.location.href = '/upload';
}
</script>
{% endblock %}
